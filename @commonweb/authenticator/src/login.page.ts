import {EventBind, WebComponent} from "@commonweb/core";
import "@commonweb/forms";
import "@commonweb/components";
import {EntityForm} from "@commonweb/forms";

const logo = `     <svg width="150" height="120" viewBox="0 0 1498 363" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1497.2 240.319C1497.2 259.419 1491.78 274.379 1480.95 285.199C1470.12 296.019 1455.13 301.429 1436 301.429H1348.07C1328.96 301.429 1313.98 296.019 1303.15 285.199C1292.32 274.379 1286.9 259.419 1286.9 240.319V152.479C1286.9 133.379 1292.32 118.419 1303.15 107.599C1313.98 96.7791 1328.96 91.3691 1348.07 91.3691H1436C1455.12 91.3691 1470.1 96.7791 1480.93 107.599C1491.76 118.419 1497.18 133.379 1497.18 152.479L1497.2 240.319ZM1430.29 158.209C1430.29 148.029 1425.19 142.936 1415 142.929H1369.12C1358.92 142.929 1353.82 148.022 1353.83 158.209V234.589C1353.83 244.782 1358.93 249.876 1369.12 249.869H1415C1425.19 249.869 1430.28 244.776 1430.29 234.589V158.209Z"
fill="white"/>
<path d="M822.004 246.051C835.517 246.051 850.81 243.504 867.884 238.411V95.1906H934.794V297.611H871.704V278.511C860.347 286.118 847.911 291.977 834.814 295.891C822.194 299.577 811.554 301.424 802.894 301.431H785.684C768.351 301.431 754.46 296.211 744.014 285.771C733.567 275.331 728.344 261.454 728.344 244.141V95.1406H795.244V232.631C795.202 234.399 795.518 236.157 796.176 237.799C796.833 239.441 797.818 240.933 799.069 242.183C800.32 243.433 801.812 244.416 803.455 245.072C805.097 245.729 806.856 246.044 808.624 246.001L822.004 246.051Z"
fill="white"/>
<path d="M1124.93 297.609V362.539H1058V95.1891H1125.05V114.279C1137.05 106.399 1145.35 100.599 1157.97 96.9091C1170.59 93.2191 1181.23 91.3691 1189.89 91.3691H1207.1C1224.43 91.3691 1238.32 96.5892 1248.77 107.029C1259.22 117.469 1264.44 131.346 1264.45 148.659V236.499C1264.45 255.599 1259.03 270.559 1248.2 281.379C1237.37 292.199 1222.39 297.609 1203.28 297.609H1124.93ZM1170.81 146.749C1157.3 146.749 1142 149.296 1124.93 154.389V246.049H1182.28C1192.47 246.049 1197.57 240.956 1197.57 230.769V160.119C1197.61 158.351 1197.3 156.592 1196.64 154.95C1195.98 153.308 1195 151.817 1193.75 150.567C1192.49 149.317 1191 148.334 1189.36 147.677C1187.72 147.021 1185.96 146.705 1184.19 146.749H1170.81Z"
fill="white"/>
<path d="M959.852 297.609H1034.03V30.2594H959.852V297.609Z" fill="white"/>
<path d="M469 30.2598H629.57C656.343 30.2598 675.78 36.3064 687.88 48.3998C699.98 60.4931 706.02 79.9098 706 106.65V144.84C706 171.573 699.947 190.986 687.84 203.08C675.733 215.173 656.296 221.22 629.53 221.22H537.78V289.78H469V30.2598ZM637.22 106.65C637.22 91.3698 629.573 83.7297 614.28 83.7297H537.82V152.73H614.28C629.566 152.73 637.214 145.093 637.22 129.82V106.65Z"
fill="white"/>
<path d="M172.55 28.2245C172.55 13.0615 160.259 0.769531 145.096 0.769531C129.933 0.769531 117.641 13.0615 117.641 28.2245C117.641 43.3875 129.933 55.6795 145.096 55.6795C160.259 55.6795 172.55 43.3875 172.55 28.2245Z"
fill="#92FBB6"/>
<path d="M47.8076 301.43C32.901 286.526 21.0763 268.831 13.0088 249.357C4.94125 229.882 0.789062 209.009 0.789062 187.93C0.789062 166.85 4.94125 145.977 13.0088 126.503C21.0763 107.028 32.901 89.3338 47.8076 74.4297L91.5977 118.22C82.4444 127.373 75.1837 138.239 70.23 150.198C65.2763 162.157 62.7266 174.975 62.7266 187.92C62.7266 200.864 65.2763 213.682 70.23 225.641C75.1837 237.6 82.4444 248.467 91.5977 257.62L47.8076 301.43Z"
fill="#92FBB6"/>
<path d="M146.089 301.43C131.182 286.526 119.358 268.831 111.29 249.357C103.223 229.882 99.0703 209.009 99.0703 187.93C99.0703 166.85 103.223 145.977 111.29 126.503C119.358 107.028 131.182 89.3338 146.089 74.4297L189.879 118.22C180.726 127.373 173.465 138.239 168.511 150.198C163.558 162.157 161.008 174.975 161.008 187.92C161.008 200.864 163.558 213.682 168.511 225.641C173.465 237.6 180.726 248.467 189.879 257.62L146.089 301.43Z"
fill="#92FBB6"/>
<path d="M228.277 28.2345C228.277 43.3975 240.569 55.6895 255.732 55.6895C270.895 55.6895 283.188 43.3975 283.188 28.2345C283.188 13.0715 270.895 0.77948 255.732 0.77948C240.569 0.77948 228.277 13.0715 228.277 28.2345Z"
fill="#92FBB6"/>
<path d="M353.001 301.43C367.908 286.526 379.732 268.831 387.8 249.357C395.867 229.882 400.02 209.009 400.02 187.93C400.02 166.85 395.867 145.977 387.8 126.503C379.732 107.028 367.908 89.3338 353.001 74.4297L309.211 118.22C318.364 127.373 325.625 138.239 330.579 150.198C335.532 162.157 338.082 174.975 338.082 187.92C338.082 200.864 335.532 213.682 330.579 225.641C325.625 237.6 318.364 248.467 309.211 257.62L353.001 301.43Z"
fill="#92FBB6"/>
<path d="M254.75 301.43C269.657 286.526 281.481 268.831 289.549 249.357C297.616 229.882 301.769 209.009 301.769 187.93C301.769 166.85 297.616 145.977 289.549 126.503C281.481 107.028 269.657 89.3338 254.75 74.4297L211 118.24C220.156 127.391 227.418 138.257 232.374 150.217C237.329 162.176 239.879 174.994 239.879 187.94C239.879 200.885 237.329 213.703 232.374 225.663C227.418 237.622 220.156 248.488 211 257.64L254.75 301.43Z"
fill="#92FBB6"/>
    </svg>`


@WebComponent({
    selector: 'login-page',
    style: `:host{display:flex;height:100%;align-items:center;justify-content:center; background-color: #003A5D;
}
        .login-card{
            width:350px;
            display:flex;
            flex-direction:column;
            align-items:center;
        }
    `,
    template: ` 
            <div class="login-card">
            ${logo}
            <entity-form configurations='${JSON.stringify([
        {"type": "string", "label": "Usuario/Correo", "propertyName": "username"},
        {"type": "password", "label": "ContraseÃ±a", "propertyName": "password"}
    ])}'>
            </entity-form>
        
         <tt-button>Entrar</tt-button>
         </div>
        
        `
})
export class LoginPage extends HTMLElement {
    @EventBind("tt-button:click")
    public submit() {
        const {values} = (this.shadowRoot.querySelector("entity-form") as EntityForm).value();
        const strategy = this.querySelector("[auth-strategy]");

        if(strategy){
            strategy.execute(values);
        }else{
            throw "NO AUTH STRATEGY"
        }

    }

}
