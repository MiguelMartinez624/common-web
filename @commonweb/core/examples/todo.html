<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Todo App</title>
</head>
<script src="https://cdn.tailwindcss.com"></script>

<style>
    /* width */
    ::-webkit-scrollbar {
        width: 10px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
        background: rgb(20, 28, 51);
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
        background: #06b6d4;
        border-radius: 5px;
    }

    /* Handle on hover */
    ::-webkit-scrollbar-thumb:hover {
        background: #006b7d;
    }

    .loop-injected > li {
        background-color: white;
    }

</style>
<body class="bg-slate-900 p-20 text-slate-50">
<div class="flex gap-4 justify-between">
    <div class="w-[40%] outline outline-cyan-900 p-4  margin-auto  justify-center">
        <div class="mb-[2em]">
            <form action="" onsubmit="return false">
                <div class="flex">
                    <input type="text" id="first_name"
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-l-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                           placeholder="Todo"/>
                    <button class="bg-blue-500 border border-blue-500 hover:bg-blue-700 text-white font-bold rounded-r-lg	 px-4 ">
                        Agregar
                    </button>
                </div>

            </form>
            <bind-element
                    input-src="input:value"
                    from="button:(click)"
                    to="for-each:push">
            </bind-element>
            <bind-element
                    value=""
                    from="button:(click)"
                    to="form:reset">
            </bind-element>

        </div>
        <div class="flow-root  ">
            <ul role="list" class=" p-3  h-[60vh] overflow-y-scroll divide-y divide-gray-200 dark:divide-gray-700">
                <for-each
                        html='<template-view view="http://localhost:63342/common-web/@commonweb/core/examples/todo-item.html"></template-view>'
                        data="[]">
                </for-each>
            </ul>
        </div>
    </div>

    <api-call method="GET"></api-call>
    <div class="w-[60%] outline outline-cyan-900 p-4  margin-auto  justify-center">
        <on-fly-component></on-fly-component>
    </div>
</div>
<script src="../dist/lib-pkg.js" type="text/javascript"></script>

<script>
    window
        .RegisterWebComponent({
            selector: 'on-fly-component',
            template: `<h5 ></h5>`,
            // so we can take global style rules
            useShadow:false
        })
        .with_attribute("message", function (value) {
            this.innerHTML =
                //language=HTML
                    `
                        <template-view data="${value}"
                        view='  <li class="mt-8 flex justify-between outline outline-cyan-500 hover:bg-cyan-900 hover:outline-blue-400 cursor-pointer">
                                <div main class="flex items-center flex-1  p-3 sm:py-4">
                                    <div class="flex-shrink-0">
                                        <img class="w-8 h-8 rounded-full"
                                             src="https://images.unsplash.com/photo-1501196354995-cbb51c65aaea?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=4&w=256&h=256&q=80"
                                             alt="Neil image">
                                    </div>
                                    <div class="flex-1 min-w-0 ms-4">
                                        <p class="text-sm font-medium text-gray-900 truncate dark:text-white">
                                            {{@host.data}}
                                        </p>
                                        <p class="text-sm text-gray-500 truncate dark:text-gray-400">
                                            {{@host.data}}@windster.com
                                        </p>
                                    </div>
                                    <div class="inline-flex flex-0.2 items-center text-base font-semibold text-gray-900 dark:text-white">
                                        $320
                                    </div>
                                </div>
                                <bind-element value="{{@host.data}}"
                                              from="div[main]:(click)"
                                              to="on-fly-component:[message]">
                                </bind-element>

                                <div>
                                    <button class="bg-red-500 p-4 h-[100%] w-[60px]">X</button>
                                    <bind-element value="{{@host.data}}" from="button:(click)"
                                                  to="for-each:removeNode"></bind-element>
                                </div>
                            </li>'>

                        </template-view>

                    `;
        })
        .build();

</script>
</body>
</html>
